{% extends "dashboard/base.html" %}

{% block title %}Student Details - Student Management Portal{% endblock %}

{% block navbar %}
<!-- Top Navbar -->
<div class="navbar-top">
    <h2><i class="bi bi-person-circle me-2"></i>Student Details</h2>
    <div class="user-section">
        {% if user.is_authenticated %}
        <span class="username-display">
            <i class="bi bi-person-circle me-1"></i>{{ user.username }}
        </span>
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">
            <i class="bi bi-box-arrow-right me-1"></i>Logout
        </a>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8">
            <div class="card card-custom shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-badge me-2"></i>Student Information
                    </h5>
                </div>
                <div class="card-body p-4">
                    <!-- Basic Info Section -->
                    <h6 class="text-uppercase text-muted mb-3 fw-semibold">
                        <i class="bi bi-info-circle me-2"></i>Basic Information
                    </h6>
                    <div class="row mb-4">
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Full Name</small>
                                <div class="fw-bold">{{ student.full_name }}</div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Email</small>
                                <div>{{ student.email }}</div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Phone</small>
                                <div>{{ student.phone }}</div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Course Info Section -->
                    <h6 class="text-uppercase text-muted mb-3 fw-semibold">
                        <i class="bi bi-book me-2"></i>Course Information
                    </h6>
                    <div class="row mb-4">
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Course Name</small>
                                <div class="fw-bold">{{ student.course_name }}</div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">LMS Username</small>
                                <div>{{ student.lms_username|default:"Not Assigned" }}</div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Certificate ID</small>
                                <div>{{ student.certificate_id|default:"Not Issued" }}</div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Status</small>
                                <div>
                                    {% if student.status == 'active' %}
                                    <span class="badge bg-success">Active</span>
                                    {% elif student.status == 'completed' %}
                                    <span class="badge bg-secondary">Completed</span>
                                    {% elif student.status == 'dropped' %}
                                    <span class="badge bg-warning">Dropped</span>
                                    {% else %}
                                    <span class="badge bg-info">{{ student.status }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Fees Info Section -->
                    <h6 class="text-uppercase text-muted mb-3 fw-semibold">
                        <i class="bi bi-cash-stack me-2"></i>Fee Information
                    </h6>
                    <div class="row mb-3">
                        <div class="col-md-4 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Total Fees</small>
                                <div class="fw-bold">${{ student.total_fees }}</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Paid Fees</small>
                                <div class="text-success fw-bold">${{ student.paid_fees }}</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-2">
                            <div class="py-2">
                                <small class="text-muted fw-semibold d-block mb-1">Remaining Fees</small>
                                <div class="text-danger fw-bold">${{ student.remaining_fees }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card Footer with Actions -->
                <div class="card-footer bg-light">
                    <div class="d-flex justify-content-end gap-2">
                        <a href="{% url 'student_documents' student.id %}" class="btn btn-outline-secondary">
                            <i class="bi bi-folder me-1"></i>Documents
                        </a>
                        <a href="{% url 'student_edit' student.id %}" class="btn btn-primary">
                            <i class="bi bi-pencil me-1"></i>Edit
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}